<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Farming AI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

    <div id="loading-overlay">
        <div class="spinner"></div>
        <h4 class="text-success fw-bold">Processing Data...</h4>
        <p class="text-muted">Consulting AI Brain</p>
    </div>

    <div class="header text-center">
        <h1 class="fw-bold"><i class="fas fa-seedling"></i> Smart Farming AI</h1>
        <p class="opacity-75 mb-0">Precision Agriculture System</p>
    </div>

    <div class="container pb-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                
                <div class="text-center">
                    <ul class="nav nav-pills" id="pills-tab" role="tablist">
                        <li class="nav-item">
                            <button class="nav-link {% if not res_fert %}active{% endif %}" id="tab1-btn" data-bs-toggle="pill" data-bs-target="#tab1" type="button">
                                <i class="fas fa-leaf me-2"></i>Crop Advisor
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link {% if res_fert %}active{% endif %}" id="tab2-btn" data-bs-toggle="pill" data-bs-target="#tab2" type="button">
                                <i class="fas fa-flask me-2"></i>Fertilizer Doctor
                            </button>
                        </li>
                    </ul>
                </div>

                <div class="tab-content mt-4">
                    
                    <div class="tab-pane fade {% if not res_fert %}show active{% endif %}" id="tab1" role="tabpanel">
                        <div class="card p-4 p-md-5">
                            <h3 class="fw-bold text-success mb-4"><i class="fas fa-search-location me-2"></i>What should I grow?</h3>
                            
                            <form method="POST" id="cropForm">
                                <div class="row g-3">
                                    <div class="col-md-4"><label>Nitrogen (N)</label><input type="number" name="N" class="form-control" required></div>
                                    <div class="col-md-4"><label>Phosphorus (P)</label><input type="number" name="P" class="form-control" required></div>
                                    <div class="col-md-4"><label>Potassium (K)</label><input type="number" name="K" class="form-control" required></div>
                                    <div class="col-md-3"><label>Temp (°C)</label><input type="number" step="0.1" name="temp" class="form-control" required></div>
                                    <div class="col-md-3"><label>Humidity (%)</label><input type="number" step="0.1" name="hum" class="form-control" required></div>
                                    <div class="col-md-3"><label>pH</label><input type="number" step="0.1" name="ph" class="form-control" required></div>
                                    <div class="col-md-3"><label>Rain (mm)</label><input type="number" step="0.1" name="rain" class="form-control" required></div>
                                </div>
                                <button type="submit" name="predict_crop" class="btn-custom mt-4">Predict Crop</button>
                            </form>
                            
                            {% if res_crop %}
                            <div class="result-box success-res">
                                <h4><i class="fas fa-check-circle"></i> Recommended Crop</h4>
                                <p class="display-6 fw-bold mb-0">{{ res_crop }}</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                    <div class="tab-pane fade {% if res_fert %}show active{% endif %}" id="tab2" role="tabpanel">
                        <div class="card p-4 p-md-5">
                            <h3 class="fw-bold text-primary mb-4"><i class="fas fa-prescription-bottle-alt me-2"></i>Nutrient Calculator</h3>
                            
                            <form method="POST" id="fertForm">
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label>Soil Type</label>
                                        <select name="soil" class="form-select">
                                            {% for s in soils %}<option value="{{ s }}">{{ s }}</option>{% endfor %}
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label>Crop Type</label>
                                        <select name="crop" class="form-select">
                                            {% for c in crops %}<option value="{{ c }}">{{ c }}</option>{% endfor %}
                                        </select>
                                    </div>
                                    <div class="col-md-4"><label>Nitrogen</label><input type="number" name="n_f" class="form-control" required></div>
                                    <div class="col-md-4"><label>Phosphorus</label><input type="number" name="p_f" class="form-control" required></div>
                                    <div class="col-md-4"><label>Potassium</label><input type="number" name="k_f" class="form-control" required></div>
                                    <div class="col-md-4"><label>pH</label><input type="number" step="0.1" name="ph_f" class="form-control" required></div>
                                    <div class="col-md-4"><label>Moisture (%)</label><input type="number" step="0.1" name="moist_f" class="form-control" required></div>
                                    <div class="col-md-4"><label>Temp (°C)</label><input type="number" step="0.1" name="temp_f" class="form-control" required></div>
                                    <div class="col-md-6"><label>Humidity (%)</label><input type="number" step="0.1" name="hum_f" class="form-control" required></div>
                                    <div class="col-md-6"><label>Rain (mm)</label><input type="number" step="0.1" name="rain_f" class="form-control" required></div>
                                </div>
                                <button type="submit" name="predict_fert" class="btn-custom mt-4" style="background: linear-gradient(45deg, #1565c0, #42a5f5);">
                                    Get Recommendation
                                </button>
                            </form>

                            {% if res_fert %}
                            <div class="result-box info-res">
                                <h4><i class="fas fa-clipboard-check"></i> Recommended Fertilizer</h4>
                                <p class="display-6 fw-bold mb-0">{{ res_fert }}</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>